/* ===================================================
   YAML Property Manager - Main CSS
   =================================================== */

/* ===========================================
   2. COMMON BASE STYLES
   =========================================== */

/* 2.1. Base Window Styles */
.yaml-window {
  padding: 20px;
  min-width: 300px;
  width: auto;
  box-sizing: border-box;
}

.yaml-window h2 {
  font-size: var(--h2-size) !important;
  color: var(--h2-color, var(--text-normal)) !important;
  font-weight: var(--h2-weight) !important;
  line-height: var(--h2-line-height) !important;
  margin-bottom: var(--h2-margin-bottom, 20px) !important;
  border-bottom: var(--h2-border-bottom, none) !important;
  text-align: left !important;
}

.yaml-window h3 {
  font-size: var(--h3-size) !important;
  color: var(--h3-color, var(--text-normal)) !important;
  font-weight: var(--h3-weight) !important;
  line-height: var(--h3-line-height) !important;
  margin-bottom: var(--h3-margin-bottom, 16px) !important;
}

.yaml-window h4 {
  font-size: var(--h4-size) !important;
  color: var(--h4-color, var(--text-normal)) !important;
  font-weight: var(--h4-weight) !important;
  line-height: var(--h4-line-height) !important;
  margin-bottom: var(--h4-margin-bottom, 12px) !important;
}

.yaml-window h5 {
  font-size: var(--h5-size) !important;
  color: var(--h5-color, var(--text-normal)) !important;
  font-weight: var(--h5-weight) !important;
  line-height: var(--h5-line-height) !important;
  margin-bottom: var(--h5-margin-bottom, 8px) !important;
}

.yaml-window p, 
.yaml-window span, 
.yaml-window div {
  color: var(--text-normal);
  font-size: var(--font-text-size, 16px);
  line-height: var(--line-height-normal, 1.5);
}

.yaml-window .yaml-settings-description,
.yaml-window .yaml-file-selection__count,
.yaml-window .yaml-selected-count,
.yaml-window .yaml-message--no-templates {
  color: var(--text-muted);
  font-size: var(--font-smaller);
}

.yaml-window strong, 
.yaml-window b {
  font-weight: var(--font-bold, 600);
}

.yaml-window em,
.yaml-window i {
  font-style: italic;
}

/* 2.2. Header Styles */
.yaml-header {
  display: flex;
  align-items: center;
  margin-bottom: var(--size-4-4, 12px);
  width: 100%;
  box-sizing: border-box;
  border-bottom: var(--divider-width, 1px) solid var(--background-modifier-border);
  padding-bottom: var(--size-4-2, 8px);
}

.yaml-header__back-button {
  margin-right: 8px;
}

.yaml-header__title {
  margin: 0;
  font-size: var(--font-ui-medium);
  font-weight: var(--font-medium);
  color: var(--h4-color, var(--text-normal));
}

/* 2.3. Common Button Styles */
/* 2.3. Common Button Styles */
.yaml-button {
  border-radius: var(--button-radius) !important;
  font-size: var(--font-ui-small) !important;
  font-weight: var(--font-normal) !important;
  padding: var(--size-4-1) var(--size-4-3) !important;
  height: var(--input-height) !important;
  background-color: var(--interactive-normal) !important;
  color: var(--text-normal) !important;
  border: 1px solid var(--background-modifier-border) !important;
  cursor: pointer !important;
  transition: all 0.15s ease !important;
  min-width: 120px !important;
  display: block !important;
  width: 100% !important;
  margin: 8px 0 !important;
  text-align: center !important;
  box-shadow: var(--input-shadow) !important;
}

.yaml-button:hover {
  background-color: var(--interactive-hover) !important;
  box-shadow: var(--input-shadow-hover) !important;
}

.yaml-button--disabled {
  opacity: 0.5 !important;
  cursor: not-allowed !important;
  background-color: var(--interactive-normal) !important;
  color: var(--text-muted) !important;
}

.yaml-button--confirm {
  background-color: var(--interactive-accent) !important;
  color: var(--text-on-accent) !important;
  border-color: var(--interactive-accent) !important;
}

.yaml-button--confirm:hover {
  background-color: var(--interactive-accent-hover) !important;
  border-color: var(--interactive-accent-hover) !important;
}

.yaml-button--cancel {
  background-color: var(--interactive-normal) !important;
}

.yaml-button-container {
  margin-top: 20px !important;
  padding: 8px 0 !important;
  display: flex !important;
  justify-content: center !important;
  gap: 8px !important;
  width: 100% !important;
}

.yaml-button-container--sticky {
  position: sticky !important;
  bottom: 0 !important;
  background: var(--background-primary) !important;
  padding: 12px 0 !important;
  border-top: 1px solid var(--background-modifier-border) !important;
  z-index: 10 !important;
  box-shadow: 0 -5px 10px rgba(0, 0, 0, 0.1);
  margin-bottom: 0;
}

.yaml-button-container button {
  width: auto !important;
  min-width: 120px !important;
}

/* 2.4. Loading Indicators */
.yaml-loading,
.yaml-templates-loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 20px;
  width: 100%;
}

.yaml-spinner {
  width: 30px;
  height: 30px;
  border: 3px solid var(--background-modifier-border);
  border-top: 3px solid var(--interactive-accent);
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* 2.5 Common Message Styles */
.yaml-message--no-templates {
  color: var(--text-muted);
  font-style: italic;
  text-align: center;
  padding: 20px;
}

.yaml-selected-count {
  margin: 8px 0;
  font-style: italic;
  color: var(--text-muted);
}

/* ===========================================
   3. PROPERTY MANAGER WINDOW
   =========================================== */

/* 3.1. Main Container */
.yaml-window__property-manager {
  padding: 20px;
  width: auto;
  height: auto;
  max-width: 300px;
  max-height: none;
  overflow: visible;
  margin: 0 auto;
}

/* 3.2. Action Sections */
.yaml-actions {
  display: flex;
  flex-direction: column;
  gap: 20px;
  width: 100%;
  box-sizing: border-box;
  margin: 8px 0;
}

.yaml-action-section {
  padding: 12px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  box-sizing: border-box;
  width: 100%;
}

.yaml-action-section__divider {
  margin: 20px 0;
  border: none;
  border-top: 1px solid var(--background-modifier-border);
}

/* 3.3. File Selection */
.yaml-file-selection {
  width: 100%;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.yaml-file-selection__count {
  margin-top: 4px;
  font-style: italic;
  color: var(--text-muted);
}

.yaml-file-selection button {
  width: 100%;
  box-sizing: border-box;
  margin-bottom: 4px;
}

/* 3.4. Action Buttons */
.yaml-button--file-selection {
  width: 100%;
  box-sizing: border-box;
}

.yaml-button--file-action {
  width: 100%;
}

.yaml-button--primary {
  background-color: var(--interactive-accent) !important;
  color: var(--text-on-accent) !important;
}

.yaml-button--bulk-edit {
  background-color: var(--interactive-normal) !important;
}

/* ===========================================
   4. SINGLE FILE PROPERTY WINDOW
   =========================================== */

/* 4.1. Main Container */
.yaml-window__single-file {
  padding: 20px;
  width: auto;
  max-width: 900px;
  max-height: 85vh;
  overflow-y: auto !important;
  overflow-x: visible;
  margin: 0 auto;
}

/* 4.2. Property Container */
.yaml-property-container {
  width: 100%;
  margin: 12px 0;
  max-height: 400px;
  overflow-y: auto;
  overflow-x: hidden;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  padding: 8px;
  box-sizing: border-box;
}

/* 4.3. Property List */
.yaml-property-list {
  display: block;
  width: 100%;
  min-width: 700px;
}

.yaml-property-item {
  display: flex;
  flex-direction: row;
  align-items: center;
  width: 100%;
  flex-wrap: nowrap;
  margin-bottom: 8px;
  padding: 4px 0;
  min-width: 700px;
}

.yaml-property-item--header {
  font-weight: bold;
  border-bottom: 1px solid var(--background-modifier-border);
  margin-bottom: 8px;
  padding-bottom: 8px;
}

/* 4.4. Property Item Cells */
.yaml-property-item__name {
  flex: 1;
  min-width: 100px;
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
}

.yaml-property-item__type {
  width: 120px;
  flex-shrink: 0;
}

.yaml-property-item__value {
  flex: 2;
  min-width: 150px !important;
  max-width: none !important;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: normal;
  word-break: break-word;
  overflow-wrap: break-word;
}

.yaml-property-item__actions {
  width: 60px;
  flex-shrink: 0;
  text-align: center;
  display: flex;
  justify-content: center;
  gap: 4px;
}

/* 4.5. Property Buttons */
.yaml-button--add-property {
  width: 100%;
}

.yaml-button--move-up, 
.yaml-button--move-down {
  padding: 2px !important;
  min-width: auto !important;
  height: auto !important;
}

.yaml-button--delete-item {
  padding: 2px 5px !important;
  min-width: auto !important;
  height: auto !important;
}

.yaml-button--save {
  background-color: var(--interactive-accent) !important;
  color: var(--text-on-accent) !important;
}

/* 4.6. New Property Form */
.yaml-new-property__buttons {
  display: flex;
  gap: 4px;
}

.yaml-new-property__name {
  flex: 1;
  min-width: 100px;
}

.yaml-new-property__type {
  width: 120px;
  flex-shrink: 0;
}

.yaml-new-property__value {
  flex: 2;
  min-width: 150px;
}

.yaml-new-property__buttons {
  display: flex;
  gap: 4px;
}

.yaml-button--add {
  background-color: var(--interactive-accent) !important;
  color: var(--text-on-accent) !important;
}

/* ===========================================
   5. TEMPLATE SELECTION WINDOW
   =========================================== */

/* 5.1. Main Container */
.yaml-window__template-selection {
  padding: 20px 20px 20px 20px;
  width: auto;
  max-width: 900px;
  max-height: 85vh;
  overflow-y: auto;
  overflow-x: hidden;
  margin: 0 auto;
  position: relative;
  padding-bottom: 70px !important;
}

/* 5.2. Content Wrapper */
.yaml-content {
  width: 100%;
}

/* 5.3. Template Container */
.yaml-template-container {
  width: 100%;
  margin: 12px 0;
  max-height: 400px;
  overflow-y: auto;
  overflow-x: hidden;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  padding: 8px;
  box-sizing: border-box;
}

/* 5.4. Recent Templates */
.yaml-recent-templates {
  margin-bottom: 20px;
}

.yaml-template-option {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  margin-bottom: 4px;
  padding: 4px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.1s ease;
}

.yaml-template-option:hover {
  background-color: var(--background-modifier-hover);
}

/* 5.5. Template Tree */
.yaml-template-tree {
  margin: 12px 0;
  max-height: 300px;
  overflow-y: auto;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  padding: 8px;
  width: 100%;
  box-sizing: border-box;
}

.yaml-template-tree-item {
  margin-bottom: 2px;
  transition: all 0.1s ease;
}

.yaml-template-tree-item--file, 
.yaml-template-tree-item--folder {
  margin-bottom: 2px;
}

.yaml-template-tree-header {
  display: flex;
  align-items: center;
  padding: 4px 0;
  border-radius: 4px;
  transition: all 0.1s ease;
  cursor: pointer;
}

.yaml-template-tree-header:hover {
  background-color: var(--background-modifier-hover);
}

.yaml-template-tree-icon {
  margin-right: 4px;
}

.yaml-template-tree-name {
  flex: 1;
}

.yaml-template-radio-container {
  display: flex;
  align-items: center;
  margin-right: 4px;
}

.yaml-template-tree-children {
  margin-left: 12px;
  transition: all 0.2s ease;
}

.yaml-template-tree-children--collapsed {
  display: none;
}

/* 5.6. Selected Template Info */
.yaml-selected-template {
  background-color: var(--background-secondary-alt);
  border-radius: 6px;
  padding: 12px 12px;
  margin: 12px 0 30px 0;
  font-size: 0.9em;
  border-left: 3px solid #9370DB;
  margin-bottom: 12px;
}

/* 5.7. Property Selection */
.yaml-select-all {
  display: flex;
  align-items: center;
  margin-bottom: 8px;
  width: 100%;
  margin-right: 12px;
  padding: 4px;
  background-color: var(--background-secondary-alt);
  border-radius: 4px;
}

.yaml-select-all__checkbox {
  margin-right: 8px;
}

/* 5.8. Property Item Cells for Templates */
.yaml-property-item__include {
  width: 70px;
  flex-shrink: 0;
  text-align: center;
}

.yaml-property-item__preserve {
  width: 120px !important;
  flex-shrink: 0 !important;
  text-align: center !important;
}

/* 5.9. Apply Button */
.yaml-button--apply {
  background-color: var(--interactive-accent) !important;
  color: var(--text-on-accent) !important;
}

/* ===========================================
   6. BATCH FILE SELECTOR WINDOW
   =========================================== */

/* 6.1. Main Container */
.yaml-window__batch-selector {
  padding: 20px;
  width: auto;
  max-width: 600px;
  max-height: 85vh;
  overflow-y: auto;
  overflow-x: hidden;
  margin: 0 auto;
}

/* 6.2. File Tree */
.yaml-file-tree {
  margin: 12px 0;
  max-height: 400px;
  min-height: 300px;
  overflow-y: auto !important;
  overflow-x: hidden;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  padding: 8px;
  box-sizing: border-box;
  width: 100%;
}

.yaml-file-tree__container {
  width: 100%;
}

/* 6.3. File & Folder Items */
.yaml-file-item, 
.yaml-folder-item {
  padding: 4px;
  cursor: pointer;
  display: flex;
  align-items: center;
}

.yaml-file-item:hover, 
.yaml-folder-item:hover {
  background-color: var(--background-modifier-hover);
}

.yaml-file-item--disabled, 
.yaml-folder-item--disabled {
  opacity: 0.5;
  cursor: default;
}

.yaml-file-icon, 
.yaml-folder-icon {
  margin-right: 4px;
  color: #E8BA36;
}

.yaml-file-name, 
.yaml-folder-name {
  flex: 1;
}

.yaml-file-checkbox, 
.yaml-folder-checkbox {
  margin-right: 8px;
}

/* 6.4. Folder Children */
.yaml-folder-children {
  margin-left: 16px;
}

.yaml-folder-children--collapsed {
  display: none;
}

/* ===========================================
   7. FILE SELECTOR WINDOW
   =========================================== */

/* 7.1. Main Container */
.yaml-window__file-selector {
  padding: 20px;
  width: auto;
  max-width: 600px;
  max-height: 85vh;
  overflow-y: auto;
  overflow-x: hidden;
  margin: 0 auto;
}

/* ===========================================
   8. BULK PROPERTY EDITOR WINDOW
   =========================================== */

/* 8.1. Main Container */
.yaml-window__bulk-editor {
  padding: 20px;
  width: auto;
  max-width: 1000px;
  max-height: 85vh;
  overflow-y: auto !important;
  overflow-x: visible !important;
  margin: 0 auto;
}

/* 8.2. Bulk Container */
.yaml-bulk-container {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin: 12px 0;
  width: 100%;
  box-sizing: border-box;
  overflow-x: visible !important;
  overflow-y: visible !important;
  padding-bottom: 60px;
}

/* 8.3. Section Styles */
.yaml-section {
  margin-bottom: 20px;
}

.yaml-section__content {
  margin-top: 8px;
}

/* 8.4. Property List Container */
.yaml-property-list__container {
  width: 100%;
  min-width: 700px;
  overflow-x: visible;
}

/* 8.5. Delete List */
.yaml-delete-list__container {
  width: 100%; 
  min-width: 700px;
  overflow-x: visible;
}

/* 8.6. Property Usage & Examples */
.yaml-property-item__usage {
  width: 120px;
  flex-shrink: 0;
  text-align: center;
  font-size: 0.9em;
  color: var(--text-muted);
}

.yaml-property-item__examples {
  flex: 2;
  min-width: 150px;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 0.9em;
}

/* 8.7. Options */
.yaml-option {
  display: flex;
  align-items: center;
  gap: 8px;
  margin: 4px 0;
}

.yaml-option__checkbox {
  margin-right: 4px;
}

/* 8.8. Reordering Section */
.yaml-reorder-list {
  margin-top: 8px;
  margin-bottom: 8px;
  width: 100%;
  min-width: 700px;
}

.yaml-reorder-list--disabled {
  opacity: 0.75;
}

.yaml-reorder-item {
  display: flex;
  align-items: center;
  padding: 8px;
  margin-bottom: 4px;
  background-color: var(--background-secondary);
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  cursor: move;
  transition: all 0.2s ease;
  width: 100%;
  min-width: 650px;
}

.yaml-reorder-item:hover {
  background-color: var(--background-modifier-hover);
}

.yaml-reorder-item--disabled {
  cursor: default;
  background-color: var(--background-secondary-alt);
}

.yaml-reorder-item--dragging {
  opacity: 0.5;
}

.yaml-reorder-item--dragover {
  border: 2px dashed var(--interactive-accent);
  background-color: var(--background-modifier-hover);
}

.yaml-reorder-handle {
  margin-right: 8px;
  color: var(--text-muted);
  cursor: grab;
  font-size: 1.2em;
}

.yaml-reorder-handle--disabled {
  color: var(--text-muted);
  cursor: default;
}

.yaml-reorder-name {
  flex: 1;
  font-weight: 500;
}

.yaml-reorder-buttons {
  display: flex;
  gap: 4px;
}

.yaml-reorder-usage {
  font-size: 0.85em;
  color: var(--text-muted);
  margin-left: auto;
  padding-right: 8px;
}

.yaml-reorder-warning {
  color: var(--text-error);
  font-weight: 500;
}

.yaml-button--reorder-apply {
  margin-top: 12px;
  background-color: var(--interactive-accent) !important;
  color: var(--text-on-accent) !important;
  padding: 6px 12px;
  width: 100%;
}

/* 8.9. Add Property Buttons */
.yaml-button--add-property, 
.yaml-button--add-delete-property {
  width: 100%;
}

/* ===========================================
   9. SETTINGS TAB
   =========================================== */

/* 9.1. Main Container */
.yaml-settings-tab {
  padding: 0 20px;
}

.yaml-settings-tab h2 {
  font-size: var(--h2-size) !important;
  color: var(--h2-color, var(--text-normal)) !important;
  font-weight: var(--h2-weight) !important;
  margin-top: var(--h2-margin-top, 40px) !important;
  margin-bottom: var(--h2-margin-bottom, 20px) !important;
  border-bottom: var(--h2-border-bottom, 1px solid var(--background-modifier-border)) !important;
  padding-bottom: var(--size-4-2, 8px) !important;
}

.yaml-settings-tab h3 {
  font-size: var(--h3-size) !important;
  color: var(--h3-color, var(--text-normal)) !important;
  font-weight: var(--h3-weight) !important;
  margin-top: var(--h3-margin-top, 30px) !important;
  margin-bottom: var(--h3-margin-bottom, 16px) !important;
}

/* 9.2. Template Paths */
.yaml-template-paths {
  margin-bottom: 20px;
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  padding: 8px;
  max-height: 300px;
  overflow-y: auto;
}

.yaml-settings-description {
  color: var(--text-muted);
  font-style: italic;
}

/* 9.3. Template Node */
.yaml-template-node {
  margin-bottom: 2px;
}

.yaml-template-node__header {
  display: flex;
  align-items: center;
  padding: 4px 0;
  border-radius: 4px;
  transition: all 0.1s ease;
}

.yaml-template-node__header:hover {
  background-color: var(--background-modifier-hover);
}

.yaml-template-node__header--folder {
  cursor: pointer;
}

.yaml-template-node__icon {
  margin-right: 4px;
}

.yaml-template-node__name {
  flex: 1;
}

.yaml-template-node__actions {
  display: flex;
  justify-content: flex-end;
  align-items: center;
  margin-left: 8px;
}

/* Make sure button has appropriate sizing */
.yaml-template-node__actions button {
  margin: 0 !important;
  padding: 4px 8px !important;
  min-width: auto !important;
  height: auto !important;
}

.yaml-template-node__children {
  margin-left: 12px;
}

.yaml-template-node__children--collapsed {
  display: none;
}

/* ===========================================
   10. RESPONSIVE STYLES
   =========================================== */

@media screen and (max-width: 768px) {
  .yaml-window {
    width: 95%;
    padding: 12px;
    min-width: auto;
  }

  .yaml-property-item {
    flex-direction: column;
    align-items: flex-start;
  }

  .yaml-property-item__name, 
  .yaml-property-item__type, 
  .yaml-property-item__value, 
  .yaml-property-item__actions {
    width: 100%;
    max-width: 100%;
  }

  .yaml-actions {
    flex-direction: column;
  }

  .yaml-new-property {
    flex-direction: column;
    align-items: flex-start;
  }

  .yaml-new-property__name, 
  .yaml-new-property__type, 
  .yaml-new-property__value {
    width: 100%;
    margin-bottom: 4px;
  }
}

@media screen and (max-width: 650px) {
  .yaml-window__property-manager {
    min-width: auto;
    width: 95%;
    padding: 12px;
  }
}